<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>롯데ON 마이페이지</title>
    <!-- 달력 -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/moment/min/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>

    <link rel="stylesheet" href="/static/css/header.css">
    <link rel="stylesheet" href="/static/css/footer.css">
    <link rel="stylesheet" href="/static/css/reset.css">
    <link rel="stylesheet" href="/static/css/my/myinfo.css">
</head>

<body>
    <div id="wrapper">
        <header class="header">
            <div class="header__top">
                <div class="center header__top__nav">
    
                    <a href="#" th:href="@{/member/login}">로그인</a>
                    <a href="#" th:href="@{/member/join}">회원가입</a>
                    <a href="#" th:href="@{/my/home(userId=${#authentication.principal.user.userId})}">마이페이지</a>
                    <i class="fa fa-shopping-cart" aria-hidden="true"></i>&nbsp;장바구니
                    </a>
                    <a href="#" th:href="@{/member/logout}">로그아웃</a>
                </div>
            </div>
            <div class="header__bot">
                    <div class="header__bot__wrapper center">
                        <a class="logo" href="#" th:href="@{/}"><img class="logo__img" src="/static/images/header_logo.png"
                                th:src="@{/images/header_logo.png}" alt="로고" /></a>
                        <form class="search" action="/lotteon/product/search" method="get">
                            <input class="search__input" type="text" name="keyword" />
                            <!-- <input  type="hidden" name="cateCode" id="cateCodeInput" value=""> -->
                            <button class="search__btn"><img width="18" class="search__btn__img"
                                    src="/static/images/search.svg" /></button>
                        </form>
                    </div>
            </div>
        </header>
<!-- 내용 시작 -->
<div id="wrapper">
    <nav class="myinfotopside">
        <div>
            <a href="#" class="shopping-info">나의쇼핑정보</a>

            <ol>
                <li>
                    <a href="/my/order">주문<br><span>2</span></a>
                </li>
                <li>
                    <a href="/my/coupon">쿠폰<br><span>1</span></a>
                </li>
                <li>
                    <a href="/my/point">포인트<br><span>1,000</span></a>
                </li>
                <li>
                    <a href="/my/qna">문의<br><span>1</span></a>
                </li>
            </ol>
        </div>
    </nav>

    <div class="info">
        <!-- 마이페이지 사이드바 -->
        <ul>
            <li><a href="#">전체주문내역</a></li>
            <li><a href="#">포인트내역</a></li>
            <li><a href="#">쿠폰</a></li>
            <li><a href="#">나의리뷰</a></li>
            <li><a href="#">문의하기</a></li>
            <li><a href="#">나의설정</a></li>
        </ul>

        <!-- 회원정보 섹션 -->
        <section>
            <a href="#"><img src="/static/images/image.PNG" alt="패션, 타운 하나로 끝" class="banner"></a>
            <!-- 810x86 배너 이미지 -->
            <article class="latest">
                <h3>포인트내역</h3>
                <!-- 포인트내역 검색바 -->
                <div class="myinfoSearch">
                    <p>기간별 조회</p>
                    <a href="/my/point">전체</a>
                    <a href="/my/point?cate=week">일주일</a>
                    <a href="/my/point?cate=halfmonth">15일</a>
                    <a href="/my/point?cate=month">1개월</a>
                    <select id="monthSelect">
                        <option value="">검색 기간 선택</option>
                    </select>
                    <div class="date-wrapper">
                        <div class="start-date-wrapper">
                            <input type="text" id="startDate" class="start-date" readonly placeholder="시작 날짜 선택">
                        </div>

                        <div class="end-date-wrapper">
                            <input type="text" id="endDate" class="end-date" readonly placeholder="종료 날짜 선택">
                        </div>
                    </div>
                    <button onclick="searchOrders()">검색</button>
                </div>

                <!-- 포인트 있을 때 -->
                    <h3>포인트적립내역</h3>
                    <table border="0" class="widthtable">
                        <tr>
                            <th>날짜</th>
                            <th>구분</th>
                            <th>주문번호</th>
                            <th>적립금액</th>                                
                            <th>비고</th>
                            <th>유효기간</th>
                        </tr>
                          <!-- 10개 출력이나 5개만 -->
                        <tr>
                            <td>2022-12-10</td>
                            <td>적립</td>
                            <td>2022121001</td>
                            <td>340</td>
                            <td>상품 구매확정</td>
                            <td>2024-12-10</td>
                        </tr>

                        <tr>
                            <td>2022-12-10</td>
                            <td>적립</td>
                            <td>2022121001</td>
                            <td>340</td>
                            <td>상품 구매확정</td>
                            <td>2024-12-10</td>
                        </tr>

                    </table>

                    <div class="pagingBox">
                        <div class="pagingList">
                          <!-- 이전 버튼 -->
                          <a href="#" class="prev"><</a>
                      
                          <!-- 페이지 링크 -->
                          <a href="#">1</a>
                          <a href="#" class="active">2</a>
                          <a href="#">3</a>
                          <a href="#">4</a>
                          <a href="#">5</a>
                      
                          <!-- 다음 버튼 -->
                          <a href="#" class="next">></a>
                        </div>
                    </div>
                    
                </section>
    </div>
</div>
<!-- 내용 끝 -->
<footer class="footer">
    <ul class="footer__links">
        <li class="footer__link"><a href="#">회사소개</a></li>
        <li class="footer__link"><a href="#">서비스이용약관</a></li>
        <li class="footer__link"><a href="#">개인정보처리방침</a></li>
        <li class="footer__link"><a href="#">전자금융거래약관</a></li>
        <li class="footer__link"><a href="#">1.0.0</a></li>
    </ul>
    <div class="footer__info">
        <p class="footer__logo"><img src="/static/images/footer_logo.png" alt="로고"></p>
        <p class="footer__company-info">
            <strong>(주)LotteON</strong><br>
            부산시 강남구 테헤란로 152 (역삼동 강남파이낸스센터)<br>
            대표이사 : 홍길동<br>
            사업자등록번호 : 220-81-83676 사업자정보확인<br>
            통신판매업신고 : 강남 10630호 Fax : 02-589-8842
        </p>
        <p class="footer__customer-service">
            <strong>고객센터</strong><br>
            Tel : 1234-5678 (평일 09:00~18:00)<br>
            스마일클럽/SVIP 전용 : 1522-5700 (365일 09:00~18:00)<br>
            경기도 부천시 원미구 부일로 223(상동) 투나빌딩 6층<br>
            Fax : 051-123-4567 | Mail : LotteON@LotteON.co.kr
        </p>
    </div>
</footer>
<script>
    // 오늘 달로부터 5개월 전까지의 월 목록을 생성하는 함수
    function generateMonthOptions() {
        const select = document.getElementById('monthSelect');
        const currentDate = new Date();
        const currentMonth = currentDate.getMonth(); // 현재 월 (0부터 시작)
        const currentYear = currentDate.getFullYear();

        // 오늘로부터 5개월 전까지의 월 리스트 생성
        for (let i = 0; i < 6; i++) {
            const date = new Date(currentYear, currentMonth - i);
            const year = date.getFullYear();
            const month = date.getMonth() + 1; // 0부터 시작하므로 +1
            const optionText = `${year}년 ${month}월`;
            const optionValue = `${year}-${month.toString().padStart(2, '0')}`;
            const option = document.createElement('option');
            option.value = optionValue;
            option.text = optionText;
            select.appendChild(option);
        }
    }

    $(function () {
        // 오늘 기준으로 최대 3년 전까지 선택 가능
        let maxYear = moment().year(); // 현재 년도
        let minYear = maxYear - 3; // 최대 3년 전까지 허용

        // 시작 날짜 선택
        $('#startDate').daterangepicker({
            singleDatePicker: true,
            locale: {
                format: 'YYYY-MM-DD',
            },
            maxDate: new Date(), // 최대 날짜를 오늘로 설정
            autoApply: true,
            autoUpdateInput: false,
            showDropdowns: true,
            minYear: minYear,
            maxYear: maxYear,
        }, function (start) {
            $('#startDate').val(start.format('YYYY-MM-DD'));
            $('#endDate').val(''); // 종료 날짜 초기화

            // 종료 날짜 선택 창 설정
            $('#endDate').daterangepicker({
                singleDatePicker: true,
                locale: {
                    format: 'YYYY-MM-DD',
                },
                minDate: moment(start).subtract(1, 'years'), // 시작 날짜로부터 1년 전까지만 선택 가능
                maxDate: start, // 최대 날짜는 시작 날짜로 설정
                autoApply: true,
                autoUpdateInput: false,
                showDropdowns: true,
            }, function (end) {
                $('#endDate').val(end.format('YYYY-MM-DD'));
            });
        });

        $('#monthSelect').on('change', function () {
            if (this.value) {
                $('#startDate').val(''); // 시작 날짜 초기화
                $('#endDate').val(''); // 종료 날짜 초기화
            }
        });
    });
    window.onload = function () {
        generateMonthOptions(); // 오늘로부터 5개월 전까지의 목록 생성
    };
</script>
</body>
</html>
